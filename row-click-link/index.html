<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>テーブルの１行リンクの調査</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="http://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
  <div class="container mt-5">
    <h1>テーブルの１行リンクの調査</h1>
    <table class="table table-hover" id="table">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">名前</th>
          <th scope="col">年齢</th>
          <th scope="col">編集</th>
          <th scope="col">プレビュー</th>
        </tr>
      </thead>
      <tbody>
        <tr data-href="https://github.com/">
          <th scope="row">1</th>
          <td>山田太郎</td>
          <td>20</td>
          <td>
            <button type="button" class="btn btn-outline-warning no_link" onclick="location.href='https://qiita.com/'">
              <span class="material-icons">edit</span>
              編集
            </button>
          <td>
            <span class="material-icons no_link" type="button" class="btn btn-lg btn-info" data-bs-toggle="popover"
              title="title" data-bs-content="content">info</span>
          </td>
        </tr>
        <tr data-href="https://staff.hatenablog.com/">
          <th scope="row">2</th>
          <td>鈴木花子</td>
          <td>18</td>
          <td>
            <button type="button" class="btn btn-outline-warning no_link"
              onclick="location.href='https://hatenablog.com/topics/technology'">
              <span class=" material-icons">edit</span>
              編集
            </button>
          <td>
            <span class="material-icons no_link" type="button" class="btn btn-lg btn-info" data-bs-toggle="popover"
              title="title" data-bs-content="content">info</span>
          </td>
        </tr>
      </tbody>
    </table>


    <div class="mt-5">
      <h4>説明</h4>
      <ul>
        <li>テーブルの１行をクリックするとリンク</li>
        <li>編集ボタンは別リンク</li>
        <li>プレビューのアイコンはポップバー（リンクではない）</li>
      </ul>
    </div>
  </div>

  <script>
    jQuery(function ($) {
      $('tr[data-href]').addClass('clickable')
        .click(function (e) {
          //対象の要素以外であれば、data-hrefのURLに遷移する
          if (!$(e.target).is('a') && $(e.target).closest('.no_link').length == 0) {
            console.log('aとnot_link以外');
            const url = $(e.target).closest('tr').data('href');
            window.open(url, '_blank')
          }
        });
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <script>
    const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
    const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
  </script>
</body>

</html>
